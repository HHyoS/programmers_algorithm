#include <string>
#include <vector>
#include <algorithm>
#include <map>
#include <time.h>
using namespace std;
map<int, int> check;
vector<int> temp;
void dfs(int chance, int index, vector<int> ck, int deep) {
    if (index != -1)
        ck[index] = 1;
    if (ck.size() - deep == 1) {
        for (int a = 0; a < ck.size(); ++a) {
            if (ck[a] == 1)
                check[temp[a]] = 1;
        }
    }
    else {
        for (int a = 0; a < temp.size() - 1; ++a) {
            if (ck[a] == 0) {
                int b = a + 1;
                while (ck[b] == 1) {
                    if (b + 1 >= temp.size())
                        return;
                    ++b;
                }
                if (b >= temp.size())
                    break;

                if (temp[a] > temp[b]) {
                    dfs(chance,a,ck,++deep);
                    if (chance == 1) {
                        dfs(0, b, ck, ++deep);
                    }
                }
                else {
                    dfs(chance,b,ck,++deep);
                    if (chance == 1) {
                        dfs(0, a, ck, ++deep);
                    }
                }
            }
        }
    }
}
int solution(vector<int> n) {
    int answer = 0;
    temp.assign(n.begin(), n.end());
    vector<int> a(n.size(), 0);
    dfs(1,-1,a,0);
    printf("???\n");
    for (int a : n) {
        if (check[a] == 1)
            ++answer;
    }
    return answer;

}

int main() {
    vector<int> a = { -9,-2,-3,-1,25,22,14,-8,16,37 };
    time_t start, end;
    start = time(NULL);
    printf("%d", solution(a));
    end = time(NULL);
    double result = (double)(end - start);
    printf("time = %f", result);
    return 0;
}
